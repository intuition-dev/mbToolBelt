// mB v6.10.17 on 2019-10-30T15:51:33.360Z
var EventBus=function(){this.topics={}}
EventBus.prototype.getTopic=function(t,e){return this.topics[t]||(this.topics[t]=new Topic(t,e)),this.topics[t]},EventBus.prototype.getTopics=function(){return this.topics}
var Topic=function(t,e){this.identifier=t,this.options=e||{},this.listeners={},this.queue={}}
function consume(t,e,i){for(var s in e)if(matchWildCard(s,t)){var n=e[s]
for(var o in n)i.callback(n[o])
e[s].splice(0,e[s].length)}}function matchWildCard(t,e){return new RegExp("^"+e.split("*").join(".*")+"$").test(t)}Topic.prototype.addListener=function(t,e){var i=new Listener(t,e,this)
return this.listeners[t]=this.listeners[t]||[],this.listeners[t].push(i),!0===this.options.persistent&&consume(t,this.queue,i),i},Topic.prototype.removeListener=function(t){for(var e=0,i=this.listeners[t.event]||[];e<i.length;e++)if(i[e]===t)return void this.listeners[t.event].splice(e,1)},Topic.prototype.dispatch=function(t,e){var s,n=[]
for(s in this.listeners)matchWildCard(t,s)&&(n=n.concat(this.listeners[s]))
for(i in n)n[i].callback&&n[i].callback(e)
n.length||!0!==this.options.persistent||(this.queue[t]=this.queue[t]||[],this.queue[t].push(e))}
var Listener=function(t,e,i){this.event=t,this.callback=e,this.topic=i}
Listener.prototype.unbind=function(){this.topic.removeListener(this)},"object"==typeof module&&"object"==typeof module.exports?module.exports=EventBus:window.EventBus=EventBus,window.eventBus=new EventBus,window.DeventBus=eventBus.getTopic("DEFAULT",{persistent:!0})