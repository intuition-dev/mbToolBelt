// mB v8.2.5 on 2020-02-25T01:29:43.359Z
class SPArouter{constructor(){}static loadHtml(toHref,fromHref,back_){if(!back_)try{history.pushState({url:toHref},'',toHref)}catch(err){}SPArouter.disE({type:SPArouter.NavSTART,toHref,fromHref,back:back_});let url=toHref;axios.get(url).then((function(txt){let $html=$('<html></html>').append($(txt.data)),title=$html.find('title').first().text();document.title=title;let newContent=$html.find(SPArouter.zone).html();SPArouter.fROOTfix(),SPArouter.disE({type:SPArouter.NavDONE,toHref,fromHref,newContent,$html,back:back_})})).catch((function(er){SPArouter.disE({type:SPArouter.ERR,err:er})}))}static appendQueryString(url,queryVars){let firstSeparator=-1==url.indexOf('?')?'?':'&',queryStringParts=new Array;for(let key in queryVars)try{queryStringParts.push(key+'='+queryVars[key])}catch(err){}return url+firstSeparator+queryStringParts.join('&')}static disE(msg){setTimeout((function(){dispatchEvent(new CustomEvent('nav',{detail:msg}))}),1)}static checkPlatform(){var native=!1;-1===document.URL.indexOf('http://')&&-1===document.URL.indexOf('https://')&&(native=!0);var isFile='file:'==window.location.protocol;if(isFile||native)try{window.nodeRequire=require,delete window.require,delete window.exports,delete window.module}catch(err){}SPArouter.isFile=native||isFile,SPArouter.isFile&&SPArouter.watchATags()}static fROOTfix(){SPArouter.isFile&&$('a').each((function(index,value){let hasQuery=this.href.includes('?'),hasAnchor=this.href.includes('#');if(this.href.includes('index.html'))return;let splitSymbol=hasQuery?'?':hasAnchor?'#':null;const urlParts=this.href.split(splitSymbol);'/'==urlParts[0].slice(-1)?$(this).attr('href',urlParts[0]+'index.html'+(splitSymbol?splitSymbol+urlParts[1]:'')):$(this).attr('href',urlParts[0]+'/index.html'+(splitSymbol?splitSymbol+urlParts[1]:''))}))}static watchATags(){const target=document.querySelector('body');let debounce;new MutationObserver((function subscriber(mutations){mutations.forEach(mutation=>{mutation.addedNodes.length&&(clearTimeout(debounce),debounce=setTimeout(()=>{SPArouter.fROOTfix()},0))})})).observe(target,{childList:!0,subtree:!0})}static init(foo){SPArouter.checkPlatform(),addEventListener('nav',foo),$(window).on('popstate',(function(e){let state=e.originalEvent.state;if(null!==state){e.preventDefault();let oldUrl=sessionStorage.getItem('oldUrl');sessionStorage.setItem('oldUrl',state.url),SPArouter.loadHtml(state.url,oldUrl,!0)}})),$(document).on('click','a',(function(e){let anchor=$(e.currentTarget),href=anchor.prop('href');if(!href||href.length<1)return;if(anchor.is('.norouter'))return;e.preventDefault();let fromHref=window.location.href;sessionStorage.setItem('oldUrl',href),SPArouter.loadHtml(href,fromHref,null)}));let pg=window.location.href;try{history.pushState({url:pg},'',pg)}catch(err){}sessionStorage.setItem('oldUrl',pg)}}SPArouter.zone='#router',SPArouter.NavSTART='_nav-start',SPArouter.NavDONE='_nav-loaded',SPArouter.ERR='_nav-ERR';