// mB v8.2.5 on 2020-02-25T01:29:43.359Z
class SPArouter{static loadHtml(toHref,fromHref,back_){if(!back_)try{history.pushState({url:toHref},'',toHref)}catch(err){}SPArouter.disE({type:SPArouter.NavSTART,toHref,fromHref,back:back_});let url=SPArouter.appendQueryString(toHref,{SPArouter:"\""+SPArouter.zone+"\""});axios.get(url).then((function(txt){let $html=$('<html></html>').append($(txt.data)),title=$html.find('title').first().text();document.title=title;let newContent=$html.find(SPArouter.zone).html();SPArouter.disE({type:SPArouter.NavDONE,toHref,fromHref,newContent,$html,back:back_})})).catch((function(er){SPArouter.disE({type:SPArouter.ERR,err:er})}))}static appendQueryString(url,queryVars){let firstSeparator=-1==url.indexOf('?')?'?':'&',queryStringParts=new Array;for(let key in queryVars)try{queryStringParts.push(key+'='+queryVars[key])}catch(err){}return url+firstSeparator+queryStringParts.join('&')}static disE(msg){dispatchEvent(new CustomEvent('nav',{detail:msg}))}static fROOTfix(){let fROOT=location.toString().replace(location.search,''),ii=fROOT.lastIndexOf(':');fROOT=fROOT.substring(ii+1);const isFile='file:'==window.location.protocol;isFile&&(fROOT=fROOT.slice(0,-11)),isFile?$('a').each((function(index,value){$(this).attr('href',this.href.replace('/fROOT',fROOT)),'/'==this.href.slice(-1)?$(this).attr('href',this.href+'index.html'):$(this).attr('href',this.href+'/index.html')})):$('a').each((function(index,value){$(this).attr('href',this.href.replace('/fROOT',''))}))}static init(foo){addEventListener('nav',foo),$(window).on('popstate',(function(e){let state=e.originalEvent.state;if(null!==state){e.preventDefault();let oldUrl=sessionStorage.getItem('oldUrl');sessionStorage.setItem('oldUrl',state.url),SPArouter.loadHtml(state.url,oldUrl,!0)}})),$(document).on('click','a',(function(e){let anchor=$(e.currentTarget),href=anchor.prop('href');if(!href||href.length<1)return;if(anchor.is('.norouter'))return;e.preventDefault();let fromHref=window.location.href;sessionStorage.setItem('oldUrl',href),SPArouter.loadHtml(href,fromHref,null)}));let pg=window.location.href;try{history.pushState({url:pg},'',pg)}catch(err){}sessionStorage.setItem('oldUrl',pg)}}SPArouter.zone='#router',SPArouter.NavSTART='_nav-start',SPArouter.NavDONE='_nav-loaded',SPArouter.ERR='_nav-ERR';